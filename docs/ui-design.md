# 商品管理UI仕様書

## 1. 概要

このドキュメントは、Streamlitで構築する商品管理Web画面の仕様を定義します。
実装済みの商品管理APIのみを利用し、ITに不慣れな在庫管理担当者でも直感的に使えるシンプルなUIを目指します。

## 2. 基本設計

### コンセプト: 「加えて、探す」をシンプルに

機能を「商品の新規登録」と「IDでの商品検索」の2つに絞り込み、ユーザーが迷うことのない画面を提供します。

### 使用するAPIエンドポイント

本UIは、以下の実装済みAPIエンドポイントのみを使用します。

- `GET /health`: アプリケーションヘッダーでのAPIステータス表示に使用
- `POST /items`: 「商品の新規登録」機能で使用
- `GET /items/{id}`: 「IDでの商品検索」機能で使用

### 画面構成

アプリケーションは単一ページで構成され、上から下にスクロールして機能を利用します。

1.  **ヘッダー**: アプリケーションのタイトルと現在のAPIステータスを表示
2.  **機能1: 商品の新規登録**: 新しい商品を登録するフォーム
3.  **機能2: 商品のID検索**: 既存の商品をIDで検索するフォーム

---

## 3. 画面機能詳細

### ヘッダー

画面の最上部に、アプリケーションのタイトルとAPIサーバーの稼働状況を表示します。

- **タイトル**: `商品管理システム`
- **APIステータス**:
  - `GET /health`を定期的に呼び出し、APIが正常なら「API正常稼働中」、失敗した場合は「API接続エラー」と表示します。

### 機能1: 商品の新規登録

新しい商品をシステムに登録するための機能です。

- **セクションタイトル**: `商品を新しく加える`
- **入力フォーム**:
  - **商品名**: テキスト入力欄 (`st.text_input`)
  - **価格**: 数字入力欄 (`st.number_input`)
    - マイナス値や0は入力できないように設定します。
- **登録ボタン**:
  - `[この内容で登録する]` ボタン (`st.button`)
- **処理フロー**:
  1.  ユーザーが商品名と価格を入力し、登録ボタンをクリックします。
  2.  入力内容を `POST /items` にリクエストとして送信します。
  3.  処理中はスピナー（「登録しています...」）を表示します。
- **結果フィードバック**:
  - **成功時**:
    - 「商品「(商品名)」を登録しました！」という成功メッセージを表示します。
    - **最重要**: 登録後に返却された**商品ID**を「**商品ID: (ID番号)**」の形式で大きく分かりやすく表示します。これにより、ユーザーは登録した商品を後から検索できます。
  - **失敗時（バリデーションエラーなど）**:
    - 「登録に失敗しました。入力内容を確認してください。」というエラーメッセージと、APIから返されたエラー詳細を表示します。

### 機能2: 商品のID検索

特定のIDを持つ商品を検索し、詳細を確認するための機能です。

- **セクションタイトル**: `登録済みの商品を探す`
- **入力フォーム**:
  - **商品ID**: 数字入力欄 (`st.number_input`)
- **検索ボタン**:
  - `[このIDで商品を探す]` ボタン (`st.button`)
- **処理フロー**:
  1.  ユーザーが商品IDを入力し、検索ボタンをクリックします。
  2.  入力されたIDを `GET /items/{id}` にリクエストとして送信します。
  3.  処理中はスピナー（「探しています...」）を表示します。
- **結果フィードバック**:
  - **成功時（商品が見つかった場合）**:
    - `st.success` を使い、検索結果をカード形式で見やすく表示します。
      ```
      【商品情報】
      - ID: 123
      - 商品名: テスト商品
      - 価格: 1,500円
      - 登録日時: 2024-XX-XX XX:XX:XX
      ```
  - **失敗時（商品が見つからない場合）**:
    - `st.warning` を使い、「そのIDの商品は見つかりませんでした。」というメッセージを表示します。

---

## 4. 非機能要件

- **フレームワーク**: Streamlit
- **エラーハンドリング**: APIとの通信エラーや予期せぬエラーが発生した場合は、ユーザーに分かりやすいメッセージ (`st.error`) を表示します。
- **フィードバック**: APIリクエスト中は必ずスピナー (`st.spinner`) を表示し、処理中であることをユーザーに伝えます。

## 5. 完了の定義

1.  上記で定義された全ての画面機能が実装されている。
2.  実装済みの3つのAPIエンドポイントのみを使用してすべての機能が動作する。
3.  商品登録後、ユーザーが新しい商品IDを確実に確認できる。
4.  エラー発生時に、ユーザーを混乱させない適切なメッセージが表示される。 